ext.gitBranch = {
    def branchFile = new File(rootProject.projectDir, ".git")
    if (branchFile.exists() == false) {
        return null
    }
    
   return "git rev-parse --abbrev-ref HEAD".execute().text.replace('\n', '')
}

ext.hgFeature = {
    def featurePrefix = "feature/"
    def branch = gitBranch();
    if (branch == null) {
        return null;
    }
    if (branch?.startsWith(featurePrefix)) {
        def feature = branch.substring(featurePrefix.length()).replaceAll(' ', '_');
        return feature;
    }
    return null;
}